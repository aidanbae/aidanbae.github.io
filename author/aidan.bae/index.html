<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Aidan.bae">
        <meta name="description" content="아이단의 블로그">
        <meta name="keywords" content="golang,aidan,kakaogames,kakao,gocd,gocd-agent,infra,javascript,python">
        <meta name="generator" content="Hugo 0.60.0" />
        <title> Aidan.bae | 아이단은 어디갔을까</title>
        <meta name="description" content="Aidan.bae - 아이단의 블로그">
        <meta itemprop="name" content="Aidan.bae">
        <meta itemprop="description" content="Aidan.bae - 아이단의 블로그">
        <meta property="og:title" content="Aidan.bae">
        <meta property="og:description" content="Aidan.bae - 아이단의 블로그">
        <meta property="og:image" content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200">
        <meta property="og:url" content="https://aidanbae.github.io/author/aidan.bae/">
        <meta property="og:site_name" content="아이단은 어디갔을까"><meta property="og:type" content="website">
        <link rel="icon" type="image/png" href="https://aidanbae.github.io/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="https://aidanbae.github.io/favicon-16x16.png" sizes="16x16">

	
	  <link href="https://aidanbae.github.io/author/aidan.bae/" rel="alternate" type="application/rss+xml" title="아이단은 어디갔을까" />
	  <link href="https://aidanbae.github.io/author/aidan.bae/" rel="feed" type="application/rss+xml" title="아이단은 어디갔을까" />
	

        
        
        
        
        <link rel="stylesheet" href="https://aidanbae.github.io/sass/combined.min.e5af985042854cb05807bed3365180e76bf9b8e0f41a2c81f098583599a6fb05.css">

        

        
            
        
    </head>
    <body class="bilberry-hugo-theme">
        
<nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="https://aidanbae.github.io/page/about-aidan/">Aidan</a></li>
                
            
        </ul>

        
    </div>
</nav>


        <header>
    <div class="container">
        <div class="logo">
            <a href="https://aidanbae.github.io/" class="logo">
                
                    <img src="https://aidanbae.github.io/do.png" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a href="https://aidanbae.github.io/">아이단은 어디갔을까</a></h3>
            
                <span class="subtitle">순간 순간이 소중한 목적지</span>
            
        </div>

    

        
        <div class="toggler">
        
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>


        <div class="main container">
            
    
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/code/devops/k8s/header/">
    <i class="fa fa-fw fa-code"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/code/devops/k8s/header/">envoy와 x-forwarded-proto 헤더 이슈</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-12-05</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/server">Server</a>
                
                    <a href="https://aidanbae.github.io/categories/devops">DevOps</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        <p>게임서버를 할땐 x-forwarded 헤더에 대해 깊게 다룰일이 없었는데
프론트단부터 거치는 프록시 서버들이 많은 시스템을 운영하다보니 접속 클라이언트의 정보가 담긴 x-forwarded 헤더를 공부할 기회가 생겼다.</p>
<p><code>x-</code>로 시작하는 헤더는 사용자가 임의로 정의한 헤더를 나타냅니다. 근데 nginx등 오픈소스들이 워낙 많이 쓰이다보니 사실상 표준이 된 케이스가 <code>x-forwarded-*</code> 시리즈임.</p>
<h3 id="xforwardedfor-xforwardedproto-xforwardedhost">x-forwarded-for, x-forwarded-proto, x-forwarded-host</h3>
<p>위 삼총사는 de-facto standard 헤더로 사실상 표준이 되어버린 헤더임. 이 삼총사는 한세트 묶음으로 보통 전달되며 클라우드 업계에서도 표준으로 자리잡고있음.
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Forwarded">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Forwarded</a></p>
<p>예를들면 아래처럼 사용될 수 있습니다.</p>
<ul>
<li>x-forwarded-for : {client-ip}, {proxy1_ip}, {proxy2_ip}</li>
<li>x-forwarded-proto : http or https</li>
<li>x-forwarded-host : toss.im</li>
</ul>
<p>최초의 접속된 클라이언트에 대한 정보를 나타냄.</p>
<p>제가 운영하는 클러스터는 앞단의 프록시서버에서 https를 처리하기때문에 내부 클러스터안에서는 http로 통신하면서 퍼포먼스상의 실을 최소화하는 구조입니다.</p>
<h3 id="heading">이슈</h3>
<p>istio-proxy(envoy)에서 파드로 내려주는 헤더 중 x-forwarded-proto가 http로 되어 있어 스프링 부트에서 redirect를 수행하며 절대 경로로 해버려서 https 요청을 http로 변경시켜버림.</p>
<h4 id="heading1">해결책</h4>
<p>우선 <code>x-forwarded-proto</code>가 http로 들어오고 있었다.
istio는 앞단의 프록시 서버가 있다는것을 알지못하기 때문에 이를 명시적으로 클러스터 운영자가 세팅해주어야한다.</p>
<p><em>x-forwarded-for만 들어오게해주고 x-forwarded-proto를 없애버리기</em></p>
<p>없애버리면 되겠네? 삼총사가 세트라는 사실을 잘 모르고 있었기 때문에 스프링에서 x-forwarded-proto가 없다면 상대경로로 작동한다는 사실때문에 없애보기로했다.
(앞단 프록시 서버에서는 x-forwarded-for만 넘겨주고있었는데, x-forwarded-proto를 istio가 세팅해주는 듯했다.)</p>
<p>istio의 리소스중 하나인 virtual service에서 request헤더와 response해더를 조작할 수 있는데 예를 들면 이런식이다.</p>
<pre><code>apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: application-vs
  namespace: default
spec:
  hosts:
  - &quot;app.toss.im&quot;
  gateways:
  - gateway
  http:
  - route:
    - destination:
        host: application.namespace.svc.preprod.kubernetes
        port:
          number: 80
    headers:
      response:
        remove:
          - {header_name}
</code></pre><p>detail은 isto 공식문서를 통해 확인가능하다.
<a href="https://istio.io/docs/reference/config/networking/virtual-service/">https://istio.io/docs/reference/config/networking/virtual-service/</a></p>
<p>하지만 x-forwarded-proto를 지우는 VirtualService 세팅을 했음에도
x-forwarded-proto는 http로 들어왔다:</p>
<pre><code>curl -X GET devops-test-server.alpha.test.bz -H x-forwarded-proto:https

...map[Accept:[*/*] Content-Length:[0] User-Agent:[curl/7.29.0] X-B3-Parentspanid:[dd1c14896c025516] X-B3-Sampled:[0] X-B3-Spanid:[5f31320997d82578] X-B3-Traceid:[c7ff5be60bae87c8dd1c14896c025516] X-Envoy-External-Address:[~] X-Forwarded-For:[~] X-Forwarded-Proto:[http] X-Request-Id:[f9d6ec34-6aff-41ec-9b93-aa74e2ace010]]
</code></pre><p>보안상 x-envoy-external-address와 x-forwarded-for의 ip주소를 지웠습니다 ㅎㅎ;</p>
<p>안지워지기 때문에 envoy측에서 특수한 방어로직이 있거나 generate한다는 것을 짐작가능</p>
<p>여기는 envoy의 http커넥션과 관련된 레파지토리 소스코드이다.
<a href="https://github.com/envoyproxy/envoy/blob/master/source/common/http/conn_manager_utility.cc">https://github.com/envoyproxy/envoy/blob/master/source/common/http/conn_manager_utility.cc</a>
관련 로직을 찾아보면 93번째줄!부터 쭉! (2019/12/3 기준, 소스코드는 변경될수 있으므로 직접들어가셔서 확인해야해요)</p>
<pre><code>if (config.useRemoteAddress()) {
    single_xff_address = request_headers.ForwardedFor() == nullptr;
    // If there are any trusted proxies in front of this Envoy instance (as indicated by
    // the xff_num_trusted_hops configuration option), get the trusted client address
    // from the XFF before we append to XFF.
    if (xff_num_trusted_hops &gt; 0) {
      final_remote_address =
          Utility::getLastAddressFromXFF(request_headers, xff_num_trusted_hops - 1).address_;
    }
    // If there aren't any trusted proxies in front of this Envoy instance, or there
    // are but they didn't populate XFF properly, the trusted client address is the
    // source address of the immediate downstream's connection to us.
    if (final_remote_address == nullptr) {
      final_remote_address = connection.remoteAddress();
    }
    if (!config.skipXffAppend()) {
      if (Network::Utility::isLoopbackAddress(*connection.remoteAddress())) {
        Utility::appendXff(request_headers, config.localAddress());
      } else {
        Utility::appendXff(request_headers, *connection.remoteAddress());
      }
    }
    // If the prior hop is not a trusted proxy, overwrite any x-forwarded-proto value it set as
    // untrusted. Alternately if no x-forwarded-proto header exists, add one.
    if (xff_num_trusted_hops == 0 || request_headers.ForwardedProto() == nullptr) {
      request_headers.setReferenceForwardedProto(
          connection.ssl() ? Headers::get().SchemeValues.Https : Headers::get().SchemeValues.Http);
    }
  } else {
    // If we are not using remote address, attempt to pull a valid IPv4 or IPv6 address out of XFF.
    // If we find one, it will be used as the downstream address for logging. It may or may not be
    // used for determining internal/external status (see below).
    auto ret = Utility::getLastAddressFromXFF(request_headers, xff_num_trusted_hops);
    final_remote_address = ret.address_;
    single_xff_address = ret.single_address_;
  }
  // If the x-forwarded-proto header is not set, set it here, since Envoy uses it for determining
  // scheme and communicating it upstream.
  if (!request_headers.ForwardedProto()) {
    request_headers.setReferenceForwardedProto(connection.ssl() ? Headers::get().SchemeValues.Https
                                                                : Headers::get().SchemeValues.Http);
  }
</code></pre><p>내부에 x-forwarded-proto가 없는경우 생성하는 방어로직이 여러 곳에 들어가있다.
엔보이의 소스코드를 건드려서 새로 컴파일하지 않는이상 파드로 떨궈지는 x-forwarded-proto 헤더는 운명이다.</p>
<p>그러므로 x-forwarded-proto를 삭제하려는 행위보다 윗단에서부터 잘 내려주도록 세팅해야한다.</p>
<p>envoyfilter를 이용해 <code>use_remote_address</code>, <code>xff_num_trusted_hops</code>를 조작한다.
이를 통해 이스티오는 자신보다 앞단에 프록시서버가 있다는 것을 인지할 수 있다.</p>
<pre><code>apiVersion: networking.istio.io/v1alpha3
kind: EnvoyFilter
metadata:
  name: xff-trust-hops
  namespace: istio-system
spec:
  workloadSelector:
    labels:
      istio: ingressgateway
  configPatches:
  - applyTo: NETWORK_FILTER
    match:
      context: ANY
      listener:
        filterChain:
          filter:
            name: &quot;envoy.http_connection_manager&quot;
    patch:
      operation: MERGE
      value:
        typed_config:
          &quot;@type&quot;: &quot;type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager&quot;
          use_remote_address: true
          xff_num_trusted_hops: 1
</code></pre><p>엔보이필터를 활용하면 윗단에서 내려주는 x-forwarded-proto 헤더를 파드에게 전달할 수 있다.</p>
<p>앞단 프록시 서버에서 x-forwarded-proto를 내려주는 세팅을 하면!</p>
<pre><code>[root@pransible resources]# curl -X GET devops-test-server.alpha.test.bz -H x-forwarded-proto:https
[GIN] 2019/12/03 - 11:29:27 | 200 |      47.873µs |    172.16.70.25 | GET      /

map[Accept:[*/*] Content-Length:[0] User-Agent:[curl/7.29.0] X-B3-Parentspanid:[1ae62ab0db06b9d8] X-B3-Sampled:[0] X-B3-Spanid:[59241862fb823195] X-B3-Traceid:[f2d9ff306bb45b351ae62ab0db06b9d8] X-Envoy-External-Address:[~] X-Forwarded-For:[~] X-Forwarded-Proto:[https] X-Request-Id:[e7ccda65-e493-49a5-8b00-b8986d2c5f04]]
</code></pre><p>잘들어온다!</p>

    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/istio">istio</a>
                
                    <a href="https://aidanbae.github.io/tags/x-forwarded">x-forwarded</a>
                
                    <a href="https://aidanbae.github.io/tags/header">header</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/code/devops/k8s/istio-mixer-debug/">
    <i class="fa fa-fw fa-code"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/code/devops/k8s/istio-mixer-debug/">istio debug를 위한 controlZ 활용</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-11-30</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/server">Server</a>
                
                    <a href="https://aidanbae.github.io/categories/devops">DevOps</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        istio의 mixer는 서비스에 대한 원격 분석등의 수집을 도와주는 유연한 모델이다. 서비스 옆에 붙어 있는 istio-proxy들의 수집되는 정보들을 mixer를 통해 파이프라이닝 할 수 있다.
그림처럼 adapter api를 사용하기 때문에 다양한 어댑터를 사용해 확장성과 유연성을 다 갖춘 모델이다.
istio 믹서에 문제가 생긴다면 서비스에 대한 수집 정보들에 영향이 생길 수 있다. 그러므로 특정 서비스에 라우팅이 안되고 모니터링상 이슈가 없었다면 로그나 수집 데이터를 생성, 운반하는 믹서에 이슈가 있는지 확인해보아야한다.
istio는 쿠버네티스 대시보드처럼 손쉽게 istio의 현재 상태와 스코프 기능을 제공하는 controlZ라는 서비스를 제공하고있다.

        
            <a href="https://aidanbae.github.io/code/devops/k8s/istio-mixer-debug/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/istio">istio</a>
                
                    <a href="https://aidanbae.github.io/tags/mixer">mixer</a>
                
                    <a href="https://aidanbae.github.io/tags/debug">debug</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/article/book/time/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    
    <div class="featured-image">
        <a href="https://aidanbae.github.io/article/book/time/">
            
                <img src="https://aidanbae.github.io/article/book/time/featuredImage_hue284ec917005eafc870927a79e29a2d5_1912741_700x350_fill_q95_box_smart1_2.png" alt="">
            
        </a>
    </div>


    <div class="content">
    <h3><a href="https://aidanbae.github.io/article/book/time/">시간은 흐르지 않는다.</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-10-10</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/book">Book</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        세상에 남아 있는 가장 큰 신비, 시간에 대해 끝을 달리고 있는 교수가
지금까지 현대 물리학의 성과에 의해 밝혀진 시간에 대한 이야기를 쉽게(?) 설명해준다.
시간이라는 것은 신비롭다. ‘4차원’의 4번째 축인 시간! 지금의 행동으로 인해서 이어지는 미래.
시간의 흐름은 분명해 보이는데 저자는 시간의 새로운 관점을 제시한다.
어떤 곳에서는 시간이 천천히 흐르고, 어떤 곳에서는 빨리 흐른다.
시간은 산에서 더 빨리, 평지에서 더 느리게 흐린다.
시계, 달력, UTC등.. 절대적인 시간들을 학습해온 우리들에게 시간은 절대적이지 않아를 말해준다.

        
            <a href="https://aidanbae.github.io/article/book/time/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/%ED%81%AC%ED%9D%A0">크흠</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/article/gori/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/article/gori/">생각의 선순환고리</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-09-29</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/smalltalk">SmallTalk</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        생각 - 행동/실천 - output - 피드백 - 생각
책을 많이 읽어 좋은 인사이트를 얻는 것보다 중요한 것은
생각을 내 삶에 끌여들어와 행동/실천으로 이어가고
유의미한 결과물을 빠르게 가져오는 것이다.
(자신이 생각하기에 빠른 정도면 된다.)
그리고 그 아웃풋을 토대로 느낀점, 배운점을 정리해
다시 새롭게 생각하고 꿈꾼다.
당신은 그 와중에 성장한다는 느낌을 계속 받아야한다.
만약 output에 대해 피드백 없이 또 같은 생각을 한다면 manufacturing이다.
creating이 되기 위해선 피드백을 통한 생각의 수정이 필요하다.

        
            <a href="https://aidanbae.github.io/article/gori/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/you">you</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                
<a class="bubble" href="https://aidanbae.github.io/video/shining/">
    <i class="fa fa-fw fa-video-camera"></i>
</a>

<article class="video">
    


    
        <div class="responsive-video youtube">
            <iframe src="https://www.youtube-nocookie.com/embed/IukpWDrMkAQ?rel=0" frameborder="0" allowfullscreen></iframe>
        </div>
    
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/video/shining/">밀고 나가면 어느순간 반드시 빛이 난다.</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-09-26</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/book">Book</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        이영호 변호사님
성과는 있었으나 성공은 못해봤다.
복잡계는 어려워요..
노력으로 안되는 분야들, 비즈니스라던지 인간관계
나머지 부분의 성공에 있어서 조금의 팁을 드릴 수 있을 거같다. 일정한 스펙, 자격증 수준에 대해 고시, 내가 원하는 시험이라던지 이런것들에 대해서는 여러분들에게 드리고싶은 말씀은.
복잡계 영역이 아니다. 내가 해야하는 양이 정해져있다. 변수는 딱하나 내가 이 목표를 달성하기위해 언제까지해야되겠다.
정량적인 공부들은 공부의 input량은 정해져있고 무엇을 공부해야하는지는 다 나와있어.
자기자신의 노력이 부족한거에요.
우리가 어떤 산을 올라가고 싶어할 때 그 사람의 성향은 중요하지않아.

        
            <a href="https://aidanbae.github.io/video/shining/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/%EA%B8%80%EC%93%B0%EA%B8%B0">글쓰기</a>
                
                    <a href="https://aidanbae.github.io/tags/%EC%B2%B4%EC%9D%B8%EC%A7%80-%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C">체인지 그라운드</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/article/book/siliteamman/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/article/book/siliteamman/">실리콘밸리의 팀장들 - 지독한 솔직함</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-09-20</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/book">Book</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        일을 핑계로 그동안 책리뷰를 너무 소홀히 했다. 그래도 간간히 짬을 내서 노력했는데 직업 특성상 풀리지 않는 문제에 몰두하는 부분이 있어 책을 읽는데 계획적이지 못했던 것 같다. 최근에는 토스라는 회사에 입사해 새로운 조직문화를 경험하고 있었다. 여기는 가식적인 수평문화를 배재하기 위해 모두가 보는 슬랙방에서 적극적으로 상대방에게 챌린지를 걸 수 있다. 꼰대가 살아남기 힘든 조직문화다. 여기서 침묵은 오히려 무능력이다. 적극적으로 자신의 영역에 신뢰감을 뿜어내고 결과물을 공유하며 증명해야한다. “your work is shit”으로 시작하는 표지 타이틀이 눈길을 사로잡았다.

        
            <a href="https://aidanbae.github.io/article/book/siliteamman/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/%ED%81%AC%ED%9D%A0">크흠</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    
        <div class="article-wrapper u-cf">
            
                <a class="bubble" href="https://aidanbae.github.io/code/core/shm/">
    <i class="fa fa-fw fa-code"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://aidanbae.github.io/code/core/shm/">공유 메모리를 활용한 프로세스간 통신 with C</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2019-08-14</span>
            
        

        

        
            <span class="categories">
                
                    <a href="https://aidanbae.github.io/categories/code">Code</a>
                
                    <a href="https://aidanbae.github.io/categories/devops">DevOps</a>
                
            </span>
        

        
            <span class="author"><a href="https://aidanbae.github.io/author/aidan.bae">Aidan.bae</a></span>
        
    </div>

    
        어쩌다보니 c 프로그래밍을 깊게 해야될 일이 생겼습니다. 대학교때 너무 재미없어서 이쪽은 절대 안한다고 했었는데&hellip; 컴퓨터를 알아갈수록 로우한 프로그래밍 지식이 필요해지는 순간들이 자주 찾아오네요.
쓰레드간 통신이 아닌 멀티 프로세스 프로그래밍에서 프로세스간 통신을 위해 OS단에서 제공하는 ipc라는 녀석이 있습니다. 리눅스에서 제공하는 ipc(inter process communication)는 아래 3가지입니다.
 공유 메모리 (Shared Memory) 세마포어 (Semaphore) 메세지 큐 (Message Queue)  그 중 첫번째 공유메모리는 아직도 자주 활용되는 녀석입니다.
공유메모리는 단어 뜻에서 알 수 있듯이 하나의 프로세스에서가 아니라 여러 프로세스가 함께 사용하는 메모리를 말합니다.

        
            <a href="https://aidanbae.github.io/code/core/shm/" class="more">Continue reading</a>
        
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    <a href="https://aidanbae.github.io/tags/%EA%B3%B5%EC%9C%A0%EB%A9%94%EB%AA%A8%EB%A6%AC">공유메모리</a>
                
                    <a href="https://aidanbae.github.io/tags/%EC%BD%94%EC%96%B4">코어</a>
                
            </div>
        </div>
    

    
</div>

</article>

            
        </div>
    

    
    <div class="paginator">
        
            <a href="https://aidanbae.github.io/author/aidan.bae/page/2/" class="older"><i class="fa fa-angle-double-left"></i> Older posts</a>
        

        
    </div>



        </div>

        
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
                <ul>
                
                    <li>
                        <a href="https://aidanbae.github.io/code/devops/k8s/header/">envoy와 x-forwarded-proto 헤더 이슈</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/code/devops/k8s/istio-mixer-debug/">istio debug를 위한 controlZ 활용</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/article/book/time/">시간은 흐르지 않는다.</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/article/gori/">생각의 선순환고리</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/video/shining/">밀고 나가면 어느순간 반드시 빛이 난다.</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/quote/donki/">꿈</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/article/book/siliteamman/">실리콘밸리의 팀장들 - 지독한 솔직함</a>
                    </li>
                
                </ul>
        </div>
        

        
        <div class="categories">
            <a href="https://aidanbae.github.io/categories/"><strong>Categories</strong></a>
                <ul>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/code">Code (19)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/golang">Golang (16)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/wisdom">Wisdom (13)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/book">Book (12)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/server">Server (12)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/smalltalk">Smalltalk (12)</a>
                    </li>
                
                    <li>
                        <a href="https://aidanbae.github.io/categories/devops">Devops (11)</a>
                    </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>

                
                
                
                
                
                
                
                
                
                
                    <a href="https://github.com/aidanbae" target="_blank"><i class="fa fa-github"></i></a>
                
                
            </div>
            

            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/Lednerb" target="_blank">
                &copy;
                
                    2017
                
                by Lednerb
            </a>
	    -
		<a href="https://aidanbae.github.io/author/aidan.bae/index.xml">RSS</a>
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme" target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


        

        

        
        
        <script type="text/javascript" src="https://aidanbae.github.io/js/externalDependencies.39c47e10e241eae2947b3fe21809c572.js" integrity="md5-OcR&#43;EOJB6uKUez/iGAnFcg=="></script>

        
        
        <script type="text/javascript" src="https://aidanbae.github.io/js/theme.ff50ae6dc1bfc220b23bf69dbb41b54e.js" integrity="md5-/1CubcG/wiCyO/adu0G1Tg=="></script>

        <script>
            $(".moment").each(function() {
                $(this).text(
                    moment( $(this).text() )
                        .locale( "en" )
                        .format('LL')
                );
            });

            $(".footnote-return sup").html("");
        </script>

        
            
        

        


    </body>
</html>
